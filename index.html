<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INN Track</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,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">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            overflow: hidden;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        #loader {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1000;
        }
        #loader.hidden {
            display: none;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        iframe {
            width: 100%;
            height: 100vh;
            border: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        iframe.loaded {
            opacity: 1;
        }
        #error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
            text-align: center;
            max-width: 400px;
        }
        #error-message.show {
            display: block;
        }
        .retry-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
        }
        .retry-btn:hover {
            background: #2980b9;
        }
        #debug-info {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            max-width: 300px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="loader">
        <div class="spinner"></div>
        <p>Cargando aplicación...</p>
    </div>
    
    <div id="error-message">
        <h3>⚠️ Error al cargar</h3>
        <p id="error-text"></p>
        <button class="retry-btn" onclick="location.reload()">Reintentar</button>
    </div>
    
    <div id="debug-info"></div>
    
    <iframe id="powerapp" 
            allow="geolocation; microphone; camera; clipboard-read; clipboard-write; fullscreen"
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation">
    </iframe>
    
    <script>
        // Configuración
        const CONFIG = {
            powerAppsBase: 'https://apps.powerapps.com/play/',
            defaultApp: 'e/default-1df27c31-d215-4901-b360-26ca6fcfb8ec/a/1acc35f6-516c-43ba-beef-df119d85318d',
            defaultParams: {
                tenantId: '1df27c31-d215-4901-b360-26ca6fcfb8ec',
                hint: 'ecbee255-b43a-4b0d-90db-72686fc41d72'
            },
            // Mapeo de nombres cortos a IDs de apps
            appMap: {               
                'INN INC - DEMO':'4ffa01a5-3e7d-4e48-90f0-9fa75599f2df',
                'INN Campo':'b37df347-6a94-4358-a590-99c7f6b46030',
                'INNTrack Tickets':'2eaeac54-e2e6-4172-b8b8-a2b4c22a2346',
                'INNtrack MX - Suscripción':'3bcdfb80-f342-4bd4-a209-53023229e005',
                'INNtrack MX':'3f451b8d-27db-42bf-8cf0-a47da990b326',
                'INNtrack MX - Transversales':'766e36aa-e5a5-4e9d-aa4e-8d27d3f41722',
                'InnTrack Tabaco':'8150ce20-c0a5-401c-8525-9e3fa7176fc5',
                'INNTrack Authenticator':'1acc35f6-516c-43ba-beef-df119d85318d',
                'INNTrack Platano':'c3248f37-ad98-4a67-b6a6-14e96650642b',
                'InnTrack Allianz':'d89a74c2-5cff-47c3-af35-3cc470b233b5',
                'inntrack Reporting':'dcf3fe10-9e51-45f4-a935-81c87d1c3835',
                'INNtrack MX - Config':'ffc5eee1-622b-4470-b823-9c666c134c73'
            },
            debugMode: true // Cambiar a false en producción
        };

        const iframe = document.getElementById('powerapp');
        const loader = document.getElementById('loader');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');
        const debugInfo = document.getElementById('debug-info');

        // Almacenar parámetros de sesión
        let sessionParams = {};
        let navigationCount = 0;

        /**
         * Muestra información de debug
         */
        function debug(message) {
            if (CONFIG.debugMode) {
                console.log('[INNTrack]', message);
                debugInfo.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
                debugInfo.style.display = 'block';
                // Limitar líneas de debug
                const lines = debugInfo.querySelectorAll('div');
                if (lines.length > 5) {
                    lines[0].remove();
                }
            }
        }

        /**
         * Extrae todos los parámetros de la URL actual
         * IMPORTANTE: Maneja tanto 'tokenId' como 'token_id'
         */
        function getCurrentParams() {
            const params = new URLSearchParams(window.location.search);
            const result = {};
            
            for (let [key, value] of params.entries()) {
                // Normalizar el nombre del parámetro
                const normalizedKey = key.toLowerCase();
                
                // Convertir tokenId o tokenid a token_id para consistencia interna
                if (normalizedKey === 'tokenid') {
                    result['tokenId'] = value; // PowerApps usa tokenId
                    debug(`Parámetro encontrado: ${key}=${value}`);
                } else {
                    result[key] = value;
                    debug(`Parámetro encontrado: ${key}=${value}`);
                }
            }
            
            return result;
        }

        /**
         * Construye la URL de PowerApps con todos los parámetros
         */
        function buildPowerAppsUrl(appId, additionalParams = {}) {
            // Obtener parámetros actuales de la URL
            const currentParams = getCurrentParams();
            
            // Preservar parámetros importantes de sesiones anteriores
            const allParams = {
                ...CONFIG.defaultParams,
                ...sessionParams,
                ...currentParams,
                ...additionalParams
            };

            debug(`Parámetros combinados: ${JSON.stringify(allParams)}`);

            // Guardar tokenId y otros parámetros importantes para futuras navegaciones
            if (allParams.tokenId) {
                sessionParams.tokenId = allParams.tokenId;
                debug(`Token guardado en sesión: ${allParams.tokenId}`);
            }
            if (allParams.tenantId) {
                sessionParams.tenantId = allParams.tenantId;
            }
            if (allParams.hint) {
                sessionParams.hint = allParams.hint;
            }

            // Construir path de la app
            let appPath;
            let appIdResolved = appId;
            
            // Si el appId viene del mapeo de nombres, buscar su GUID
            if (CONFIG.appMap[appId]) {
                appIdResolved = CONFIG.appMap[appId];
                debug(`App encontrada en mapeo: ${appId} -> ${appIdResolved}`);
            }
            
            // Construir el path
            if (appIdResolved && appIdResolved.startsWith('e/')) {
                // Si ya viene el path completo
                appPath = appIdResolved;
            } else if (appIdResolved && appIdResolved.length > 20) {
                // Si es solo el GUID de la app
                const environment = allParams.environment || 'default-1df27c31-d215-4901-b360-26ca6fcfb8ec';
                appPath = `e/${environment}/a/${appIdResolved}`;
            } else {
                // App por defecto
                appPath = CONFIG.defaultApp;
                debug('Usando app por defecto');
            }

            debug(`Path de app construido: ${appPath}`);

            // Construir URL con parámetros
            const url = new URL(CONFIG.powerAppsBase + appPath);
            
            // Agregar todos los parámetros (IMPORTANTE: usar 'tokenId' no 'token_id')
            Object.keys(allParams).forEach(key => {
                if (key !== 'app' && allParams[key]) {
                    url.searchParams.set(key, allParams[key]);
                }
            });

            // Agregar timestamp para evitar caché
            url.searchParams.set('sourcetime', Date.now());

            const finalUrl = url.toString();
            debug(`URL final: ${finalUrl}`);
            
            return finalUrl;
        }

        /**
         * Carga una aplicación de PowerApps
         */
        function loadApp(appId) {
            try {
                navigationCount++;
                debug(`Navegación #${navigationCount} - Cargando app: ${appId}`);
                
                loader.classList.remove('hidden');
                errorMessage.classList.remove('show');
                iframe.classList.remove('loaded');

                const appUrl = buildPowerAppsUrl(appId);
                console.log('Cargando app:', appUrl);
                
                iframe.src = appUrl;

                // Timeout de carga
                const timeout = setTimeout(() => {
                    if (!iframe.classList.contains('loaded')) {
                        showError('La aplicación está tardando más de lo esperado en cargar. Verifica tu conexión.');
                    }
                }, 15000);

                iframe.onload = () => {
                    clearTimeout(timeout);
                    loader.classList.add('hidden');
                    iframe.classList.add('loaded');
                    debug('App cargada exitosamente');
                };

            } catch (error) {
                showError('Error al cargar la aplicación: ' + error.message);
                debug('Error: ' + error.message);
            }
        }

        /**
         * Muestra mensaje de error
         */
        function showError(message) {
            loader.classList.add('hidden');
            errorText.textContent = message;
            errorMessage.classList.add('show');
            debug('Error mostrado: ' + message);
        }

        /**
         * Navega a una nueva app preservando parámetros
         */
        function navigateToApp(appId, additionalParams = {}) {
            debug(`Navegando a app: ${appId} con params: ${JSON.stringify(additionalParams)}`);
            
            // Obtener parámetros actuales
            const currentParams = getCurrentParams();
            
            // Combinar con nuevos parámetros
            const newParams = new URLSearchParams({
                ...currentParams,
                ...additionalParams
            });
            
            // CRÍTICO: Asegurarse de incluir el parámetro 'app'
            newParams.set('app', appId);

            // Actualizar URL del navegador
            const newUrl = `${window.location.origin}${window.location.pathname}?${newParams.toString()}`;
            window.history.pushState({ appId }, '', newUrl);
            
            debug(`URL actualizada: ${newUrl}`);

            // Cargar la nueva app
            loadApp(appId);
        }

        /**
         * Maneja el botón "atrás" del navegador
         */
        window.addEventListener('popstate', function(event) {
            debug('Evento popstate detectado');
            if (event.state && event.state.appId) {
                loadApp(event.state.appId);
            } else {
                const params = getCurrentParams();
                loadApp(params.app || CONFIG.defaultApp);
            }
        });

        /**
         * Escucha mensajes de PowerApps para detectar navegación
         */
        window.addEventListener('message', function(event) {
            // Verificar origen
            if (!event.origin.includes('powerapps.com')) {
                return;
            }

            debug('Mensaje recibido de PowerApps: ' + JSON.stringify(event.data).substring(0, 100));

            // Intentar detectar navegación a otra app
            if (event.data && typeof event.data === 'string') {
                try {
                    // Si el mensaje contiene una URL de PowerApps
                    if (event.data.includes('apps.powerapps.com')) {
                        const url = new URL(event.data);
                        const pathParts = url.pathname.split('/');
                        
                        // Extraer el ID de la app del path
                        const appIdIndex = pathParts.indexOf('a') + 1;
                        if (appIdIndex > 0 && pathParts[appIdIndex]) {
                            const newAppId = pathParts[appIdIndex];
                            
                            // Extraer parámetros de la nueva URL
                            const newParams = {};
                            url.searchParams.forEach((value, key) => {
                                newParams[key] = value;
                            });
                            
                            debug(`Nueva app detectada: ${newAppId}`);
                            navigateToApp(newAppId, newParams);
                        }
                    }
                } catch (e) {
                    debug('Error procesando mensaje: ' + e.message);
                }
            }
        });

        /**
         * API pública para navegación desde PowerApps
         */
        window.powerAppsNavigate = function(appId, params = {}) {
            debug(`API pública llamada: app=${appId}, params=${JSON.stringify(params)}`);
            navigateToApp(appId, params);
        };

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            debug('Documento cargado, iniciando aplicación');
            
            const urlParams = getCurrentParams();
            
            // CRÍTICO: Determinar qué app cargar
            let appToLoad;
            
            if (urlParams.app) {
                // Si hay parámetro 'app', úsalo
                appToLoad = urlParams.app;
                debug(`App especificada en URL: ${appToLoad}`);
            } else {
                // Si no hay parámetro 'app', usar la app por defecto
                appToLoad = CONFIG.defaultApp;
                debug(`Usando app por defecto: ${appToLoad}`);
            }
            
            // Cargar app inicial
            loadApp(appToLoad);

            // Guardar estado inicial
            window.history.replaceState({ appId: appToLoad }, '', window.location.href);
        });

        // Manejo de errores del iframe
        iframe.addEventListener('error', function() {
            showError('No se pudo cargar la aplicación. Por favor, intenta de nuevo.');
        });
    </script>
</body>
</html>
